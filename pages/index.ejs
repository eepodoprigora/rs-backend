<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title><%= title%></title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body>
  <% if(!userEmail) { %>
   <%- include('./partials/guest-header') %>
  <%  } %>
  <% if(userEmail) { %>
    <%- include('./partials/user-header') %>
   <%  } %>
  <div class="container">
    <% if(created) { %>
    <div class="alert alert-success">Note has been created</div>
    <%  } %>
    <% if(error) { %>
      <div class="alert alert-danger">Something went wrong</div>
      <%  } %>
    <h1>This is working</h1>
    <form action="/" method="post" class="mb-2">
      <div class="form-group mb-2">
        <input class="form-control" type="text" name="title" required>
      </div>
      <button type="submit" class="btn btn-primary">Create</button>
    </form>
    <% if(notes.length) { %>
    <div class=card>
      <ul class="list-group">
        <% for(let i=0; i<notes.length; i++) { %>
        <li class="list-group-item d-flex justify-content-between align-items-center">
         <span class="note-title"> <%=notes[i].title%></span>
         <input type="text" class="form-control edit-input w-50" style="display: none;" value="<%= notes[i].title %>">
         <span class="note-title"> <%=notes[i].owner%></span>
         <% if(notes[i].owner === userEmail) { %>
         <div class="d-flex gap-2"> 
            <button class="btn btn-primary edit-btn" data-type="edit" data-id=<%= notes[i].id %>> Редактировать </button>
            <button class="btn btn-danger delete-btn" data-type="remove" data-id=<%= notes[i].id %>> &times; </button>
            <button class="btn btn-success save-btn" data-id=<%= notes[i].id %> style="display: none;" > Сохранить </button>
            <button class="btn btn-danger cancel-btn" data-id=<%= notes[i].id %> style="display: none;" > Отменить </button>
         </div>
         <%  } %>
        </li>
        <%  } %>
      </ul>
    </div>
    <%  } else { %>
    <p>No notes</p>
    <%  }  %>
  </div>
  <script src="/app.js"></script>
</body>

</html>